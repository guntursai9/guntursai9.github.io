<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://waph-phung.github.io/clock.js"></script>

<script>
  // Clock
  function updateClock() {
    const now = new Date();
    document.getElementById("clock-text").textContent = now.toLocaleTimeString();
  }
  setInterval(updateClock, 1000);
  updateClock();

  var canvas = document.getElementById("analog-clock");
  var ctx = canvas.getContext("2d");
  var radius = canvas.height / 2;
  ctx.translate(radius, radius);
  radius = radius * 0.9;
  setInterval(drawClock, 1000);

  // Joke API (Reliable)
  async function updateJoke() {
    try {
      const response = await fetch('https://v2.jokeapi.dev/joke/Any');
      const data = await response.json();
      const joke = data.type === 'single' ? data.joke : `${data.setup} ... ${data.delivery}`;
      document.getElementById('joke-container').textContent = joke;
    } catch (error) {
      document.getElementById('joke-container').textContent = 'Failed to load joke.';
    }
  }
  updateJoke();
  setInterval(updateJoke, 60000);

  // Weather API
  async function updateWeather() {
    const apiKey = '7e8b4e67f8f541c69b4cbdbfebfcdd17';
    const city = 'Dayton';
    try {
      const response = await fetch(`https://api.weatherbit.io/v2.0/current?city=${city}&key=${apiKey}`);
      const data = await response.json();
      const weather = data.data[0];
      const weatherText = `${weather.temp}Â°C, Humidity: ${weather.rh}%, Wind: ${weather.wind_spd.toFixed(1)} m/s`;
      document.getElementById('weather').textContent = weatherText;
    } catch (error) {
      document.getElementById('weather').textContent = 'Unable to fetch weather data.';
    }
  }
  updateWeather();
  setInterval(updateWeather, 60000);
</script>
